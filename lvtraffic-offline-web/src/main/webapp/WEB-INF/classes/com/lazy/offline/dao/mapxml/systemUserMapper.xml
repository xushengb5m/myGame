<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="systemUserMapper">
	
	<select id="selectSysUserListPage" parameterType="com.lazy.offline.model.User" resultType="com.lazy.offline.model.User">
		SELECT u.id,u.email,u.password,u.create_time as createTime,u.user_name AS userName,u.user_type AS userType,
			   u.real_name AS realName,u.account_type AS accountType,u.mob_tel AS mobTel,u.fix_tel AS fixTel,u.qq,u.address,u.zip_code AS zipCode,u.introduction,
			   group_concat(r.role) AS role,
			   group_concat(r. ID) AS roleNumbers,
			   group_concat(r.remark) AS roleName
		FROM cpsx_sys_dim_user u 
		LEFT JOIN cpsx_sys_map_user_role ur  on u.id=ur.user_id 
		LEFT JOIN cpsx_sys_dim_role r on ur.role_id= r.id 
		WHERE u.status=1 
		ORDER BY u.id DESC
	</select>
	
</mapper>